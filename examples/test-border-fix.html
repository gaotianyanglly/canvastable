<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¾¹æ¡†ä¿®å¤æµ‹è¯•</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding: 0;
      background: #f5f5f5;
    }
    
    .test-section {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    h2 {
      color: #333;
      border-bottom: 2px solid #1890ff;
      padding-bottom: 10px;
    }
    
    .info {
      background: #e6f7ff;
      border: 1px solid #91d5ff;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      font-size: 14px;
    }
    
    #table-container {
      border: 1px solid #ddd;
      margin-top: 10px;
    }
    
    .controls {
      margin: 15px 0;
    }
    
    button {
      padding: 8px 16px;
      margin-right: 10px;
      background: #1890ff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    button:hover {
      background: #40a9ff;
    }
  </style>
</head>
<body>
  <h1>ğŸ”§ å•å…ƒæ ¼è¾¹æ¡†ä¿®å¤æµ‹è¯•</h1>
  
  <div class="test-section">
    <h2>æµ‹è¯•åœºæ™¯</h2>
    <div class="info">
      <strong>æµ‹è¯•ç›®æ ‡ï¼š</strong>éªŒè¯ä¸åŒçŠ¶æ€ä¸‹çš„å•å…ƒæ ¼è¾¹æ¡†æ˜¯å¦æ¸…æ™°ä¸€è‡´
      <ul>
        <li>é»˜è®¤çŠ¶æ€å•å…ƒæ ¼ - ç™½è‰²èƒŒæ™¯</li>
        <li>æ‚¬åœçŠ¶æ€å•å…ƒæ ¼ - æµ…è“è‰²èƒŒæ™¯ (#e6f7ff)</li>
        <li>é€‰ä¸­çŠ¶æ€å•å…ƒæ ¼ - æµ…è“è‰²èƒŒæ™¯ + è“è‰²è¾¹æ¡†</li>
        <li>å·²ç¼–è¾‘çŠ¶æ€å•å…ƒæ ¼ - çº¢è‰²ä¸‰è§’æ ‡è¯†</li>
      </ul>
    </div>
    
    <div class="controls">
      <button onclick="testHover()">æµ‹è¯•æ‚¬åœæ•ˆæœ</button>
      <button onclick="testSelection()">æµ‹è¯•é€‰ä¸­æ•ˆæœ</button>
      <button onclick="testEdited()">æµ‹è¯•ç¼–è¾‘æ ‡è¯†</button>
      <button onclick="resetTable()">é‡ç½®è¡¨æ ¼</button>
    </div>
    
    <div id="table-container" style="height: 500px;"></div>
  </div>

  <script src="../umd/canvastable.min.js"></script>
  <script>
    let table = null;
    
    // ç”Ÿæˆæµ‹è¯•æ•°æ®
    function generateData(count) {
      const data = [];
      for (let i = 0; i < count; i++) {
        data.push({
          id: i + 1,
          name: `ç”¨æˆ·${i + 1}`,
          age: 20 + Math.floor(Math.random() * 40),
          city: ['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³'][Math.floor(Math.random() * 4)],
          status: ['åœ¨èŒ', 'ç¦»èŒ', 'ä¼‘å‡'][Math.floor(Math.random() * 3)]
        });
      }
      return data;
    }
    
    const columns = [
      { title: 'ID', dataIndex: 'id', width: 80 },
      { title: 'å§“å', dataIndex: 'name', width: 120 },
      { title: 'å¹´é¾„', dataIndex: 'age', width: 80 },
      { title: 'åŸå¸‚', dataIndex: 'city', width: 120 },
      { title: 'çŠ¶æ€', dataIndex: 'status', width: 100 }
    ];
    
    function initTable() {
      const container = document.getElementById('table-container');
      
      if (table) {
        table.destroy();
        container.innerHTML = '';
      }
      
      table = new CanvasTable({
        container: container,
        columns: columns,
        dataSource: generateData(20),
        style: {
          width: '100%',
          height: 500
        }
      });
      
      console.log('è¡¨æ ¼å·²åˆå§‹åŒ–');
    }
    
    function testHover() {
      alert('è¯·å°†é¼ æ ‡æ‚¬åœåœ¨ä¸åŒçš„å•å…ƒæ ¼ä¸Šï¼Œè§‚å¯Ÿè¾¹æ¡†æ˜¯å¦æ¸…æ™°ä¸€è‡´');
    }
    
    function testSelection() {
      alert('è¯·ç‚¹å‡»å¹¶æ‹–åŠ¨é€‰æ‹©å¤šä¸ªå•å…ƒæ ¼ï¼Œè§‚å¯Ÿé€‰ä¸­è¾¹æ¡†å’ŒèƒŒæ™¯è‰²æ˜¯å¦æ­£ç¡®');
    }
    
    function testEdited() {
      if (table && table.selectionManager) {
        // æ ‡è®°ä¸€äº›å•å…ƒæ ¼ä¸ºå·²ç¼–è¾‘
        const rows = table.body.rows;
        if (rows.length > 0) {
          const cell1 = rows[0].cells[1];
          const cell2 = rows[1].cells[2];
          const cell3 = rows[2].cells[3];
          
          table.selectionManager.markCellAsEdited(cell1);
          table.selectionManager.markCellAsEdited(cell2);
          table.selectionManager.markCellAsEdited(cell3);
          
          table.render();
          alert('å·²æ ‡è®°éƒ¨åˆ†å•å…ƒæ ¼ä¸ºç¼–è¾‘çŠ¶æ€ï¼Œè¯·è§‚å¯Ÿçº¢è‰²ä¸‰è§’æ ‡è¯†å’Œè¾¹æ¡†');
        }
      } else {
        alert('SelectionManager æœªåˆå§‹åŒ–');
      }
    }
    
    function resetTable() {
      initTable();
    }
    
    // åˆå§‹åŒ–
    window.addEventListener('load', () => {
      initTable();
    });
  </script>
</body>
</html>

